<h1>Signup</h1>
<form id="signup" action="#" method="POST">
  <input class="username" name="username" placeholder="user name">
  <input class="password" name="password" placeholder="password">
  <button class="submit" type="submit">Submit</button>
</form>

<h1>Login</h1>
<form id="login" action="#" method="POST">
  <input class="username" name="username" placeholder="user name">
  <input class="password" name="password" placeholder="password">
  <button class="submit" type="submit">Submit</button>
</form>

<h2 id="info"></h2>

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>

<script>
  $(document).ready(() => {

    $('#login .submit').on('click', function () {
      event.preventDefault();

      const data = {
        username : $("#login .username").val(),
        password : $("#login .password").val()
      }

      fetch('/api/user/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
      .then(response => response.json())
      .then(response => {
        console.log(response);
        if (response == "Incorrect username or password") {
          $('#info').text("Incorrect username or password")
        }
      })
    })

    $('#signup .submit').on('click', function() {
      event.preventDefault();

      const data = {
        username: $('#signup .username').val(),
        password: $('#signup .password').val()
      }

      fetch('/api/user/signup', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
      })
      .then(response => response.json())
      .then(response => {
        console.log(response);
      })
      .catch(err => {
        console.log(err);
      })
    })





  })
</script>