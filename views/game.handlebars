<h1>Â¡game!</h1>

<div id="gameboard">
  <table>
    <tbody> 
      <tr class="row1" data="1">
        <td class="col1" data="1"></td>
        <td class="col2" data="2"></td>
        <td class="col3" data="3"></td>
      </tr>
      <tr class="row2" data="2">
        <td class="col1" data="1"></td>
        <td class="col2" data="2"></td>
        <td class="col3" data="3"></td>
      </tr>
      <tr class="row3" data="3">
        <td class="col1" data="1"></td>
        <td class="col2" data="2"></td>
        <td class="col3" data="3"></td>
      </tr>
    </tbody>
  </table>
</div>

<p id="coords"></p>

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>

<script>
  $(document).ready(() => {

    const id = 1; // test id 1

    // load game
    fetch(`/game/${id}`)
    .then(data => data.json())
    .then(data => {
      console.log(data);
      const xmarks = data.state.x;
      xmarks.forEach(xmark => {
        const xCoord = xmark[0];
        const yCoord = xmark[1];
        $(`.row${yCoord} .col${xCoord}`).css({background : "red"});
      })
    })

    // click listener on gameboard
    
    $("#gameboard").on("click", (event) => {
      const xcoord = parseInt(event.target.getAttribute("data"));
      const ycoord = parseInt(event.target.parentElement.getAttribute("data"));
      const coords = [xcoord, ycoord];
      console.log(coords);

      $("#coords").text("You clicked on: " + coords);

      $(event.target).css({background : "green"});
    })




  })
</script>